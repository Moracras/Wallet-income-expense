<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wallet</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="container bg-warning">
    <h1 class="text-center">Wallet App</h1>
  </div>
  <div class="container col-12 col-sm-10 col-md-8 col-lg-6">
    <div class="text-center">
      <h3>SPENDING FORM</h3>
    </div>
    <form class="container  row g-3 mb-5">
      <div class="col-md-6">
        <label for="inputdate" class="form-label">Date</label>
        <input type="date" class="form-control" id="inputdate">
      </div>
      <div class="col-md-6">
        <label for="inputHM" class="form-label">Spending</label>
        <input type="number" class="form-control" id="inputHM">
      </div>
      <div class="col-12">
        <label for="inputHA" class="form-label">Spending area</label>
        <input type="text" class="form-control" id="inputHA" placeholder="Food Fuel vs.">
      </div>

      <div class="col-12 text-center">
        <button type="submit" class="btn btn-danger" id="inputbtn">Add</button>
      </div>
    </form>
    <form class="container row g-3">

      <div class="col-10">
        <label for="inputGelir" class="visually-hidden">Income</label>
        <input type="number" class="form-control" id="inputGelir" placeholder="Income">
      </div>
      
        <button type="submit" class="col-2 btn btn-primary mb-3">Add income</button>
      

    </form>
   
      <table class="table ">
        <thead class="table-primary">
          <tr>
            <th scope="col" class="col-3">Date</th>
            <th scope="col" class="col-6">Spending</th>
            <th scope="col" class="col-2">amount</th>
            <th scope="col" class="col-2">process</th>
          </tr>
        </thead>
        <tbody id="showSpending">
                 
        </tbody>
      </table>
      <table class="container table col-4">
        <tbody class="col-4">
          <tr>
            <th scope="row">Income</th>
            <td>5000</td>
           </tr>
          <tr>
            <th scope="row">Expense</th>
            <td id="expense">3000</td>
           </tr>
          <tr>
            <th scope="row">Remain</th>
            <td>2000</td>
           </tr>
        
        </tbody>
      </table>
      <button type="submit" class="col-2 btn btn-primary mb-3">Form Clear</button>
    </div>
<script>
  let inputdate = document.querySelector("#inputdate")
  let inputHM = document.querySelector("#inputHM")
  let inputHA = document.querySelector("#inputHA")
  let inputbtn = document.querySelector("#inputbtn")
  
  let showSpending = document.querySelector("#showSpending")
  let expense = document.querySelector("#expense")

  const addStorage = (addData) => {
      localStorage.spending = JSON.stringify(addData)
    }
    const getStorage = () => {
      if (localStorage?.spending) {
        return JSON.parse(localStorage?.spending)
      } else {
        return []
      }
    }
  let data= getStorage()
console.log(data);
  const show = () =>{
    showSpending.innerHTML = ""
    let getData = getStorage()
    getData.forEach(item => {
      showSpending.innerHTML +=`<tr>
            <th scope="row">${item.date}</th>
            <td>${item.ha}</td>
            <td>${item.hm}</td>
            <td>sil</td>
          </tr>`
    });
    expense.innerText= getExpense()
  }

  const getExpense = () =>{
    let getData = getStorage()
    return getData.map(item=>item.hm).reduce((sum,item)=> sum*1+item*1)
    
  }

  inputbtn.addEventListener("click",(e)=>{
    e.preventDefault()
    let newData = {date:inputdate.value,hm:inputHM.value,ha:inputHA.value}
    data.push(newData)
    console.log(data);
    addStorage(data)
    show()
  })

  show()
  

</script>
</body>

</html>